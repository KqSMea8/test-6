<?php
 require __DIR__.'/shared.php'; $sentinels = array( 'tcp://127.0.0.1:5380?timeout=0.100', 'tcp://127.0.0.1:5381?timeout=0.100', 'tcp://127.0.0.1:5382?timeout=0.100', ); $client = new Predis\Client($sentinels, array( 'replication' => 'sentinel', 'service' => 'mymaster', )); $exists = $client->exists('foo') ? 'yes' : 'no'; $current = $client->getConnection()->getCurrent()->getParameters(); echo "Does 'foo' exist on {$current->alias}? $exists.", PHP_EOL; $client->set('foo', 'bar'); $current = $client->getConnection()->getCurrent()->getParameters(); echo "Now 'foo' has been set to 'bar' on {$current->alias}!", PHP_EOL; $bar = $client->get('foo'); $current = $client->getConnection()->getCurrent()->getParameters(); echo "We fetched 'foo' from {$current->alias} and its value is '$bar'.", PHP_EOL; 