<?php
 require __DIR__.'/shared.php'; $client = new Predis\Client($single_server + array('read_write_timeout' => 0)); $timestamp = new DateTime(); foreach (($monitor = $client->monitor()) as $event) { $timestamp->setTimestamp((int) $event->timestamp); if ($event->command === 'ECHO' && $event->arguments === '"QUIT_MONITOR"') { echo 'Exiting the monitor loop...', PHP_EOL; $monitor->stop(); break; } echo "* Received {$event->command} on DB {$event->database} at {$timestamp->format(DateTime::W3C)}", PHP_EOL; if (isset($event->arguments)) { echo "    Arguments: {$event->arguments}", PHP_EOL; } } $version = redis_version($client->info()); echo "Goodbye from Redis $version!", PHP_EOL; 