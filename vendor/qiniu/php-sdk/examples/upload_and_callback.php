<?php
require_once __DIR__ . '/../autoload.php'; use Qiniu\Auth; use Qiniu\Storage\UploadManager; $accessKey = getenv('QINIU_ACCESS_KEY'); $secretKey = getenv('QINIU_SECRET_KEY'); $bucket = getenv('QINIU_TEST_BUCKET'); $auth = new Auth($accessKey, $secretKey); $policy = array( 'callbackUrl' => 'http://your.domain.com/upload_verify_callback.php', 'callbackBody' => 'filename=$(fname)&filesize=$(fsize)' ); $uptoken = $auth->uploadToken($bucket, null, 3600, $policy); $filePath = './php-logo.png'; $uploadMgr = new UploadManager(); list($ret, $err) = $uploadMgr->putFile($uptoken, null, $filePath); echo "\n====> putFile result: \n"; if ($err !== null) { var_dump($err); } else { var_dump($ret); } 