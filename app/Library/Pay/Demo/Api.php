<?php
namespace App\Library\Pay\Demo; use App\Library\Pay\ApiInterface; class Api implements ApiInterface { private $url_notify = ''; private $url_return = ''; public function __construct($spae6a5b) { $this->url_notify = SYS_URL_API . '/pay/notify/' . $spae6a5b; $this->url_return = SYS_URL . '/pay/return/' . $spae6a5b; } function goPay($sp42f333, $sp79d97c, $spf49dcd, $spa1a573, $sp39c1e2) { $spc21a73 = strtolower($sp42f333['payway']); header('Location: http://example.com/order?out_trade_no=' . $sp79d97c . '&subject=' . $spf49dcd . '&total_fee=' . $sp39c1e2); die; } function verify($sp42f333, $sp7b72fc) { $spf1c6fe = isset($sp42f333['isNotify']) && $sp42f333['isNotify']; if ($spf1c6fe) { if (some_verify()) { \Log::error('这里可以记录一些出错信息, 内容保存在 /storage/logs 内'); echo 'error'; return false; } else { echo 'success'; } $spd58066 = $_REQUEST['']; $sp1ae8d8 = $_REQUEST['']; $sp6f5c44 = $_REQUEST['']; $sp7b72fc($spd58066, $sp1ae8d8, $sp6f5c44); return true; } else { $spd58066 = @$sp42f333['out_trade_no']; if (strlen($spd58066) < 5) { throw new \Exception('交易单号未传入'); } if (some_verify($spd58066)) { $spd58066 = $_REQUEST['']; $sp1ae8d8 = $_REQUEST['']; $sp6f5c44 = $_REQUEST['']; $sp7b72fc($spd58066, $sp1ae8d8, $sp6f5c44); return true; } else { \Log::error('这里可以记录一些出错信息, 内容保存在 /storage/logs 内'); return false; } } } }