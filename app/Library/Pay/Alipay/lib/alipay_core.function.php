<?php
function createLinkString($spe14932) { $sp4d0971 = ''; foreach ($spe14932 as $spb5c5a0 => $spe3999d) { $sp4d0971 .= $spb5c5a0 . '=' . $spe3999d . '&'; } $sp4d0971 = substr($sp4d0971, 0, strlen($sp4d0971) - 1); if (get_magic_quotes_gpc()) { $sp4d0971 = stripslashes($sp4d0971); } return $sp4d0971; } function createLinkStringUrlEncode($spe14932) { $sp4d0971 = ''; foreach ($spe14932 as $spb5c5a0 => $spe3999d) { $sp4d0971 .= $spb5c5a0 . '=' . urlencode($spe3999d) . '&'; } $sp4d0971 = substr($sp4d0971, 0, strlen($sp4d0971) - 1); if (get_magic_quotes_gpc()) { $sp4d0971 = stripslashes($sp4d0971); } return $sp4d0971; } function paraFilter($spe14932) { $spcd1f53 = array(); foreach ($spe14932 as $spb5c5a0 => $spe3999d) { if ($spb5c5a0 == 'sign' || $spb5c5a0 == 'sign_type' || $spe3999d == '') { continue; } else { $spcd1f53[$spb5c5a0] = $spe14932[$spb5c5a0]; } } return $spcd1f53; } function argSort($spe14932) { ksort($spe14932); reset($spe14932); return $spe14932; } function logResult($sp871a5b = '') { $sp297a75 = fopen('log.txt', 'a'); flock($sp297a75, LOCK_EX); fwrite($sp297a75, '执行日期：' . strftime('%Y%m%d%H%M%S', time()) . '
' . $sp871a5b . '
'); flock($sp297a75, LOCK_UN); fclose($sp297a75); } function getHttpResponsePOST($spaf19c1, $sp0ea01f, $spe14932, $sp8e2c16 = '') { if (trim($sp8e2c16) != '') { $spaf19c1 = $spaf19c1 . '_input_charset=' . $sp8e2c16; } $spf2a65a = curl_init($spaf19c1); curl_setopt($spf2a65a, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spf2a65a, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spf2a65a, CURLOPT_CAINFO, $sp0ea01f); curl_setopt($spf2a65a, CURLOPT_HEADER, 0); curl_setopt($spf2a65a, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spf2a65a, CURLOPT_POST, true); curl_setopt($spf2a65a, CURLOPT_POSTFIELDS, $spe14932); $sp37eb96 = curl_exec($spf2a65a); curl_close($spf2a65a); return $sp37eb96; } function getHttpResponseGET($spaf19c1, $sp6d4f30) { $spf2a65a = curl_init($spaf19c1); curl_setopt($spf2a65a, CURLOPT_HEADER, 0); curl_setopt($spf2a65a, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spf2a65a, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spf2a65a, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spf2a65a, CURLOPT_CAINFO, $sp6d4f30); $sp37eb96 = curl_exec($spf2a65a); curl_close($spf2a65a); return $sp37eb96; } function charsetEncode($spf7fa80, $sp1177d2, $sp9861d8) { $sp843855 = ''; if (!isset($sp1177d2)) { $sp1177d2 = $sp9861d8; } if ($sp9861d8 == $sp1177d2 || $spf7fa80 == null) { $sp843855 = $spf7fa80; } elseif (function_exists('mb_convert_encoding')) { $sp843855 = mb_convert_encoding($spf7fa80, $sp1177d2, $sp9861d8); } elseif (function_exists('iconv')) { $sp843855 = iconv($sp9861d8, $sp1177d2, $spf7fa80); } else { die('sorry, you have no libs support for charset change.'); } return $sp843855; } function charsetDecode($spf7fa80, $sp9861d8, $sp1177d2) { if (!isset($sp9861d8)) { $sp1177d2 = $sp9861d8; } if ($sp9861d8 == $sp1177d2 || $spf7fa80 == null) { $sp843855 = $spf7fa80; } elseif (function_exists('mb_convert_encoding')) { $sp843855 = mb_convert_encoding($spf7fa80, $sp1177d2, $sp9861d8); } elseif (function_exists('iconv')) { $sp843855 = iconv($sp9861d8, $sp1177d2, $spf7fa80); } else { die('sorry, you have no libs support for charset changes.'); } return $sp843855; }