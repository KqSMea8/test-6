<?php
class WxPayNotify extends WxPayNotifyReply { public final function Handle($sp19eda9 = true) { $sp594fbb = WxpayApi::notify(array($this, 'NotifyCallBack'), $sp32b59e); if ($sp594fbb == false) { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($sp32b59e); $this->ReplyNotify(false); return; } else { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } $this->ReplyNotify($sp19eda9); } public function NotifyProcess($sp631d11, &$sp32b59e) { return true; } public final function NotifyCallBack($sp631d11) { $sp32b59e = 'OK'; $sp594fbb = $this->NotifyProcess($sp631d11, $sp32b59e); if ($sp594fbb == true) { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } else { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($sp32b59e); } return $sp594fbb; } private final function ReplyNotify($sp19eda9 = true) { if ($sp19eda9 == true && $this->GetReturn_code() == 'SUCCESS') { $this->SetSign(); } WxpayApi::replyNotify($this->ToXml()); } }