<?php
namespace App\Http\Controllers; use App\System; use Illuminate\Foundation\Bus\DispatchesJobs; use Illuminate\Routing\Controller as BaseController; use Illuminate\Foundation\Validation\ValidatesRequests; use Illuminate\Foundation\Auth\Access\AuthorizesRequests; use Illuminate\Http\Request; class Controller extends BaseController { use AuthorizesRequests, DispatchesJobs, ValidatesRequests; function is_mobile() { if (isset($_SERVER['HTTP_USER_AGENT'])) { if (preg_match('/(iPhone|iPod|Android|ios|SymbianOS|Windows Phone)/i', $_SERVER['HTTP_USER_AGENT'])) { return true; } } return false; } function authQuery(Request $sp2f63b0, $sp04fabe, $spacb3a2 = 'user_id', $spc1674a = 'user_id') { return $sp04fabe::where($spacb3a2, \Auth::id()); } protected function getUserId(Request $sp2f63b0, $spc1674a = 'user_id') { return \Auth::id(); } protected function getUserIdOrFail(Request $sp2f63b0, $spc1674a = 'user_id') { $sp203bcb = self::getUserId($sp2f63b0, $spc1674a); if ($sp203bcb) { return $sp203bcb; } else { throw new \Exception('参数缺少 ' . $spc1674a); } } protected function getUser(Request $sp2f63b0) { return \Auth::getUser(); } protected function checkIsInMaintain() { if ((int) System::_get('maintain') === 1) { $spc9951d = System::_get('maintain_info'); echo view('message', array('title' => '维护中', 'message' => $spc9951d)); die; } } protected function msg($spd01c73, $sp62b8a1 = null, $spe412c9 = null) { return view('message', array('message' => $spd01c73, 'title' => $sp62b8a1, 'exception' => $spe412c9)); } }